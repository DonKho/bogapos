
$(function(){bt_reports_sales.monthly(),bt_reports_sales.monthly_product();$("#select-year").selectize({onDropdownOpen:function(a){a.hide().velocity("slideDown",{begin:function(){a.css({"margin-top":"0"})},duration:200,easing:easing_swiftOut})},onDropdownClose:function(a){a.show().velocity("slideUp",{complete:function(){a.css({"margin-top":""})},duration:200,easing:easing_swiftOut})},onChange:function(a){bt_reports_sales.monthly(),bt_reports_sales.monthly_product();$(".year").text($(this).val())}});$(".year").text($("#select-year").val());$("#select-product").selectize({onDropdownOpen:function(a){a.hide().velocity("slideDown",{begin:function(){a.css({"margin-top":"0"})},duration:200,easing:easing_swiftOut})},onDropdownClose:function(a){a.show().velocity("slideUp",{complete:function(){a.css({"margin-top":""})},duration:200,easing:easing_swiftOut})},onChange:function(a){bt_reports_sales.monthly_product()}})});bt_reports_sales={monthly:function(){var a="#sales-monthly-chart";if($(a).length){$.ajax({url:base_url+"reports/sales/monthly_chart/",type:"post",data:{year:$("#select-year").val()},dataType:"json",success:function(b){var c=c3.generate({bindto:a,data:{json:b,type:"bar",keys:{value:["Penjualan"],}},axis:{y:{tick:{format:function(f){var e=d3.format(".1s");return e(f)}}},x:{type:"category",categories:["Ja","Fe","Ma","Ap","Me","Ju","Ju","Ag","Se","Ok","No","De"]}},tooltip:{format:{title:function(e){return get_month_from_chart(e)},value:function(e,d,f){return $.number(e,0,",",".")}}},color:{pattern:["#1f77b4","#ff7f0e","#2ca02c"]}});$window.on("debouncedresize",function(){$(c).resize()})}})}},monthly_product:function(){var a="#sales-product-monthly-chart";if($(a).length){$.ajax({url:base_url+"reports/sales/product_monthly_chart/",type:"post",data:{year:$("#select-year").val(),product:$("#select-product").val()},dataType:"json",success:function(b){var c=c3.generate({bindto:a,data:{json:b.data,type:"bar",keys:{value:["Penjualan"],}},axis:{y:{tick:{format:function(f){var e=d3.format(".1s");return e(f)}}},x:{type:"category",categories:["Ja","Fe","Ma","Ap","Me","Ju","Ju","Ag","Se","Ok","No","De"]}},tooltip:{contents:function(l,f,h,j){var p=this,g=p.config,o,k,m,n,e,q;for(k=0;k<l.length;k++){if(!(l[k]&&(l[k].value||l[k].value===0))){continue}if(!o){m=get_month_from_chart(l[k].x);o="<table class='"+p.CLASS.tooltip+"'><tr><th colspan='2'>"+m+"</th></tr>"}q=p.levelColor?p.levelColor(l[k].value):j(l[k].id);o+="<tr class='"+p.CLASS.tooltipName+"-"+l[k].id+"'>";o+="<td class='name'><span style='background-color:"+q+"'></span>"+l[k].name+"</td>";o+="<td class='value'>"+$.number(l[k].value,0,",",".")+"</td>";o+="</tr>";o+="<tr class='"+p.CLASS.tooltipName+"-"+l[k].id+"'>";o+="<td class='name'><span style='background-color:"+q+"'></span>Kuantitas</td>";var n=b.quantity[0];o+="<td class='value'>"+$.number(n[l[k].index],0,",",".")+"</td>";o+="</tr>"}return o+"</table>"}},color:{pattern:["#1f77b4","#ff7f0e","#2ca02c"]}});$window.on("debouncedresize",function(){$(c).resize()})}})}}};